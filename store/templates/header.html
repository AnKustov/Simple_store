{% load static %}

{% block content %}

<header class="second-header" style="background-color: #FFFFFF; color: #4B0082;">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3 text-right d-flex align-items-center" style="color: #4B0082; font-weight: bold;"> 
                <i class="fas fa-phone"></i> (123) 456-7890
            </div>

            <div class="col-md-6 d-flex flex-column align-items-center">
                <ul class="list-unstyled d-flex align-items-center" style="margin-top: 15px !important;">
                    <li class="me-2">
                        <a href="https://uk-ua.facebook.com/" class="text-light" target="_blank" style="text-decoration: none;">
                            <img src="/media/design_images/png-transparent-facebook.png" alt="Facebook" style="width: 24px; height: auto;">
                        </a>
                    </li>
                    <li class="me-2">
                        <a href="https://youtube.com/" class="text-light" target="_blank" style="text-decoration: none;">
                            <img src="/media/design_images/youtube-.png" alt="Youtube" style="width: 24px; height: auto;">
                        </a>
                    </li>
                    <li class="me-2">
                        <a href="https://instagram.com/" class="text-light" target="_blank" style="text-decoration: none;">
                            <img src="/media/design_images/instagram.png" alt="Instagram" style="width: 24px; height: auto;">
                        </a>
                    </li>  
                    <li class="me-2">
                        <a href="https://twitter.com/" class="text-light" target="_blank" style="text-decoration: none;">
                            <img src="/media/design_images/twitter.png" alt="Twitter" style="width: 24px; height: auto;">
                        </a>
                    </li>   
                    <li class="me-2">
                        <a href="https://reddit.com/" class="text-light" target="_blank" style="text-decoration: none;">
                            <img src="/media/design_images/reddit.png" alt="Reddit" style="width: 24px; height: auto;">
                        </a>
                    </li>      
                    <li class="me-2">
                        <a href="https://linkedin.com/" class="text-light" target="_blank" style="text-decoration: none;">
                            <img src="/media/design_images/linkedin.png" alt="LinkedIn" style="width: 24px; height: auto;">
                        </a>
                    </li>                        
                </ul>
            </div>
            
            <div class="col-md-3">
                <ul class="nav justify-content-end" style="margin-top: 10px !important;">
                    {% if user.is_authenticated %}
                    <!-- выход -->
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'logout' %}" style="color: #4B0082;">
                            <i class="fas fa-sign-out-alt"></i> Выход</a> 
                    </li>
                    <!-- Личный кабинет -->
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'profile' %}" style="color: #4B0082;">
                            <i class="fas fa-user"></i> Кабинет</a>
                    </li>
                    {% else %}
                    <li class="nav-item dropdown">
                        <div class="dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="color: #4B0082 !important;">
                                Вход / Регистрация
                            </a>
                            <ul class="dropdown-menu custom-shadow bg-body" aria-labelledby="userDropdown" style="width: 100%; border-radius: 0;">
                                <li><a class="dropdown-item" href="{% url 'register' %}" style="color: #4B0082;"><i class="fas fa-user-plus" style=
                                    ".dropdown-menu a.dropdown-item:hover {
                                    background-color: #000000 !important;
                                    color: #FFFFFF !important;
                                  }"></i> Регистрация</a></li>
                                <li><a class="dropdown-item" href="#" style="color: #4B0082;" data-bs-toggle="modal" data-bs-target="#loginModal"><i class="fas fa-sign-in-alt"></i> Вход</a></li>
                            </ul>
                        </div>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </div>
</header>

<header>
    <link rel="stylesheet" type="text/css" href="{% static 'css/lightbox.min.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="{% static 'css/styles.css' %}">
    
    <nav class="navbar navbar-expand-lg navbar-light bg-light p-1 mb-1 bg-body">
        <div class="container-fluid d-flex justify-content-between align-items-center">
            <div class="col-md-3">
            <a class="navbar-brand" href="{% url 'main' %}">
                <div class="logo-container">
                    <img src="/media/design_images/logo.png" alt="Logo" class="logo-image">
                </div>
            </a>
            </div>
            <div class="col-md-6">
                <div class="d-flex align-items-center justify-content-center">
                    <form class="form-inline my-auto flex-grow-1" action="{% url 'search_results' %}" method="GET">
                        <div class="input-group align-items-center custom-border-second">
                            <input class="form-control" type="search" name="q" placeholder="Поиск" aria-label="Search" style="border-radius: 0% !important;" onmouseover="this.style.borderColor = '#FF8C00'; this.style.borderWidth = '1.5px';" onmouseout="this.style.borderColor = '#FF8C00'; this.style.borderWidth = '0.5px';">
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-md-3">
                <div class="collapse navbar-collapse flex-grow-0 justify-content-end" id="navbarNav">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'cart:cart_detail' %}" style="color: #4B0082;">
                                <i class="fas fa-shopping-cart"></i> Корзина</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>        
    </nav>    
    <hr style="border-top: 2px solid #4B0082; margin: 0; box-shadow: 1px 1px 3px rgba(102, 51, 153, 1);">
</header>

<header class="third-header" style="background-color: transparent; color: #4B0082; margin-top: 0;">
    <div class="col-md-4 text-right d-flex align-items-center w-100"> 
        <div class="dropdown custom-shadow bg-body">
            <button class="btn btn-custom dropdown-toggle rounded-0" type="button" id="categoryDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                <img src="/media/design_images/layers.png" alt="Иконка" style="height: 24px; width: auto;"> Категории
            </button>
            <ul class="dropdown-menu custom-shadow" aria-labelledby="categoryDropdown" style="border: none !important; background: none !important; padding:0; width: 200px; border-radius: 0;">
                {% include 'category_list.html' %}
            </ul>
        </div>

        <div class="container">
            <div class="col-md-4 w-100">
                <ul class="list-unstyled d-flex" style="justify-content: flex-end; margin-top: 10px !important;">
                    <li>
                        <a href="#" data-bs-toggle="modal" data-bs-target="#feedbackModal">
                            <img src="/media/design_images/telephone.png" class="pulsating-icon" alt="Звонок" />
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</header>


<!-- ВСПЛЫВАЮЩЕЕ ОКНО ЛОГИНА -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" style="background-color: transparent; border: none; margin-top: 150px;">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="card custom-shadow p-3 mb-5 bg-body rounded" style="border-radius: 0% !important;">
                        <div class="card-body">
                        <h4 class="card-title text-center">Вход</h4>
                            <form method="post" action="{% url 'login' %}">
                                {% csrf_token %}
                                <div class="mb-3">
                                    <label for="username" class="form-label">Имя пользователя:</label>
                                    <input type="text" class="form-control" id="username" name="username" required style="outline: none !important;
                                    box-shadow: none !important;
                                    border-color: #4B0082 !important; border-radius: 0% !important;">
                                </div>
                                <div class="mb-3">
                                    <label for="password" class="form-label">Пароль:</label>
                                    <input type="password" class="form-control" id="password" name="password" required style="outline: none !important;
                                    box-shadow: none !important;
                                    border-color: #4B0082 !important; border-radius: 0% !important;">
                                </div>
                                <div class="text-center">
                                    <button type="submit" class="btn btn-custom shadow p-1 mb-3" style="width: 100%; border-radius: 0% !important;">Войти</button>
                                </div> 
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ВСПЛЫВАЮЩЕЕ ОКНО ОБРАТНОЙ СВЯЗИ -->
<div class="modal fade" id="feedbackModal" tabindex="-1" aria-labelledby="feedbackModalLabel" aria-hidden="true">
    <div class="modal-dialog" style="margin-top: 150px;">
        <div class="modal-content custom-shadow" style="border-radius: 0% !important;">
            <div class="modal-header">
                <h5 class="modal-title" id="feedbackModalLabel">Зворотній зв'язок</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form method="post" class="custom-form" id="feedbackForm" action="{% url 'feedback' %}">
                    {% csrf_token %}
                    <div class="mb-3">
                        <label for="id_name">Ваше ім'я:</label>
                        <input type="text" name="name" maxlength="100" required="" id="id_name" class="form-control" style="outline: none !important;
                        box-shadow: none !important;
                        border-color: #4B0082 !important; border-radius: 0% !important;">
                    </div>
                    <div class="mb-3">
                        <label for="id_message">Повідомлення:</label>
                        <textarea name="message" required="" id="id_message" class="form-control" style="outline: none !important;
                        box-shadow: none !important;
                        border-color: #4B0082 !important; border-radius: 0% !important;"></textarea>
                    </div>
                    <div class="mt-3 button-container text-center">
                        <button type="submit" class="btn btn-custom shadow p-2" style="border-radius: 0% !important;">Надіслати</button>
                    </div>
                </form>             
            </div>
        </div>
    </div>
</div>

{% endblock %}


<style>
.fixed-header {
    position: fixed;
    width: 100%;
    z-index: 9999;
}
</style>

<!-- ЛОГИН -->
<script>
window.addEventListener('scroll', function() {
    var header = document.querySelector('.third-header');
    var scrollTop = window.pageYOffset || document.documentElement.scrollTop;

    if (scrollTop > 0) {
        header.classList.add('fixed-header');
        header.style.top = '0';
    } else {
        header.classList.remove('fixed-header');
        header.style.top = '';
    }
});
</script>

<!-- ОБРАТНАЯ СВЯЗЬ -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const feedbackForm = document.getElementById('feedbackForm');
        if (feedbackForm) {
            feedbackForm.addEventListener('submit', function (e) {
                e.preventDefault();
                const formData = new FormData(feedbackForm);

                fetch(feedbackForm.action, {
                    method: 'POST',
                    body: formData,
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        $('#feedbackModal').modal('hide');
                    } else {
                        console.log(data.errors);
                    }
                })
                .catch(error => {
                    console.error('Произошла ошибка:', error);
                });
            });
        }
    });
</script>






